<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Behind the scenes of Ethereum Pet Shop tutorial | Darío Macchi</title>
    <style>
      
      @charset "UTF-8";
html {
  height: 100%;
}

body {
  height: 100%;
  margin: 0px;
  padding: 0px;
  color: #414141;
  font-size: 11px;
}

article a {
  text-decoration: none;
  color: #000;
}

a img {
  border: 0px;
}

.submenu {
  float: right;
  padding-top: 7px;
}

.orange_box {
  padding: 0px 0px 0px 10px;
  font-weight: bold;
  background: #ff922c;
  border: #ff922c 1px solid;
  border-radius: 12px;
  float: left;
  color: #fff;
  margin-right: 10px;
}

.orange_box div.username {
  padding: 0px 10px 0px 26px;
  background: url('data:image/png;base64,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') no-repeat 0px 6px;
  float: left;
  height: 35px;
  line-height: 35px;
}

.orange_box ul {
  border-left: #ec6100 1px solid;
  padding: 0px 10px 0px 5px;
  float: left;
  overflow: hidden;
  list-style-type: none;
  list-style-image: none;
  margin: 0px;
}

.orange_box ul li {
  padding: 10px 0px 8px 0px;
  float: left;
}

.orange_box ul li a {
  border-left: #ff922c 1px solid;
  font-weight: bold;
  padding: 0px 0px 0px 5px;
}

.orange_box ul li a {
  padding: 0px;
}

/* Footer style {*/
.footer {
  background-color: #00445c; height: 20px; color: #ffffff; overflow: hidden;
}
.footer a {
  color: #ffffff
}
.footer a:hover {
  text-decoration: underline
}
.footer ul {
  float: right;
  list-style-type: none;
  margin-top: 2px;
}
.footer li {
  border-left: #ffffff 1px solid; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; float: left; padding-top: 0px; height:16px; margin-top:0px;
}
.footer li:first-child {
  border-bottom: 0px; border-left: 0px; border-top: 0px; border-right: 0px; height:16px; margin-top:1px;
}
.clearfix:after {
  display: block; height: 0pt; visibility: hidden; clear: both; content: "."
}
.footer ul:after {
  display: block; height: 0pt; visibility: hidden; clear: both; content: "."
}

@media only screen and (min-width: 1170px) {
  .details .dm-main-content.is-fixed .dm-board {
    padding-top: 50px;
  }

  .container-fluid.dm-board {
    max-width: 800px;
    border: #d8d7d7 1px solid;
  }
}

.details .dm-main-content.is-fixed .dm-board {
  margin-bottom: 40px;
}

.details .container-fluid.dm-board h1 {
  font-size: 20px;
  font-weight: bold;
  padding: 5px 0px 0px 0px;
  margin: 0px 0px 6px 0px;
}

.details .container-fluid.dm-board h2 {
  font-size: 18px;
  margin-bottom: 6px;
  color: #000;
}

.details .container-fluid.dm-board h3 {
  font-size: 16px;
  margin-bottom: 2px;
  text-decoration: underline;
}

.details .container-fluid.dm-board h4 {
  font-size: 14px;
  font-style: italic;
}

article li {
  margin-bottom: 4px;
}

article, section {
  color: #414141;
  font-size: 14px;
  text-align: justify;
}

header, section {
  margin: 0px 20px;
}

header p {
  text-align: left;
}

header p:not(:last-child) {
  margin-bottom: 0px;
}

.anchor {
  display: block;
  position: relative;
  top: -54px;
}

article a:not(.no_external_ico), section a:not(.no_external_ico) {
  font-weight: bold;
  color: #069;
  background: url(/assets/images/external.png) right 50% no-repeat;
  padding-right: 12px;
}

article a:not([href]) {
  background: inherit;
  padding-right: inherit;
}

article .duration {
  margin-bottom: 0px;
}

section table {
  margin: 0 auto;
  max-width: 636px;
}

.summary {
  font-style: italic;
  padding-top: 8px;
  cursor: none !important;
  margin-bottom: 1rem;
}

table td, table th {
  border: #d8d7d7 1px solid;
  padding: 5px;
}

.essay .date {
  width: 100%;
  border-top: 1px solid;
  text-align: right;
}

.essay p {
  font-size: 14px;
}


      .essay {
        margin-left: inherit;
        border: 0px !important;
      }

      .details .container-fluid.dm-board h2 {
        font-size: 20px;
        margin-bottom: 2px;
        font-weight: bold;
        padding-top: 8px;
      }

      .details .container-fluid.dm-board h3 {
        font-weight: bold;
        text-decoration: inherit;
      }

      article .essay h3 {
        font-weight: bold !important;
        text-decoration: inherit !important;
      }

      article .essay li {
        font-size: 14px;
      }

    </style>

    <meta name="google-site-verification" content="46a7V_NIglu9MvjEX4267RGvXUGqYaic6LPWM6eQ824" />

    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Darío Macchi" />
<meta name="description" content="Deep dive into some tools/topics beyond the coverage of Ethereum Pet Shop -- Your First Dapp tutorial. I explain things from a programmer point of view without worrying about underlying technology and concepts like mining hashing, elliptic-curve cryptography, peer-to-peer networks, etcetera. They are not necessary to use blockchain and you will have to accept them as given by the platform." />
<meta name="keywords" content="kanbancv,resume,kanban,curriculum vitae,me,experience,education,research,projects,software engineer,PwC,InnovaAge,Universidad ORT Uruguay" />

<link rel="dns-prefetch" href="//dariomac.com"/>
<link rel="dns-prefetch" href="//translate.googleapis.com"/>
<link rel="dns-prefetch" href="//gstatic.com"/>
<link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com"/>
<link rel="dns-prefetch" href="//google-analytics.com"/>
<link rel="dns-prefetch" href="//fonts.gstatic.com"/>
<link rel="dns-prefetch" href="//translate.google.com"/>
<link rel="dns-prefetch" href="//google.com"/>
<link rel="dns-prefetch" href="//c.statcounter.com"/>
<link rel="dns-prefetch" href="//statcounter.com"/>
<link rel="dns-prefetch" href="//fonts.googleapis.com"/>
<link rel="dns-prefetch" href="//yui.yahooapis.com"/>

<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans' type='text/css'>
<!-- <link rel="stylesheet" href="https://yui.yahooapis.com/pure/0.6.0/pure-min.css" type='text/css'> -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" href="/assets/css/18style.css" type="text/css" >
<link rel="stylesheet" href="/assets/css/18style_desktop.css" media='screen and (min-width: 768px)' type="text/css">

<link rel="canonical" href="https://www.vairix.com/tech-blog/behind-the-scenes-of-ethereum-pet-shop-tutorial" />

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-28220054-1']);
_gaq.push(['_trackPageview']);

(function () {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = (document.location.protocol === 'https:' ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

function afterContentDraw () {
  setTimeout(function () {
    var aList = $('a').not('a[href^="/"]').not('a[href*="www.dariomac.com"]').not('a[href*="javascript:void(0)"]');
    aList = aList.add($('a[href$=".pdf"],a[href$=".zip"],a[href$=".txt"]'));
    $.each(aList,
      function (k, v) {
        var $v = $(v);

        $v.click(function () {
          _gaq.push(['_trackPageview', $v.attr('href')]);
        });
        // $v.css('color','red');
      });
    
    preloadImages($('a.fancybox'));
  }, 1000);
}

function preloadImages (array) {
  if (!preloadImages.list) {
    preloadImages.list = [];
  }
  for (var i = 0; i < array.length; i++) {
    var img = new Image();
    img.src = $(array[i]).attr('href');
    preloadImages.list.push(img);
  }
}

</script>

<!-- Default Statcounter code for Dariomac.com
https://www.dariomac.com -->
<script type="text/javascript">
  var sc_project=9186547; 
  var sc_invisible=1; 
  var sc_security="dce954c9"; 
  </script>
  <script type="text/javascript"
  src="https://www.statcounter.com/counter/counter.js"
  async></script>
  <noscript><div class="statcounter"><a title="Web Analytics"
  href="https://statcounter.com/" target="_blank"><img
  class="statcounter"
  src="https://c.statcounter.com/9186547/0/dce954c9/1/"
  alt="Web Analytics"></a></div></noscript>
<!-- End of Statcounter Code -->

<link rel="shortcut icon" href="/assets/favicon.ico" />

<link href="https://plus.google.com/101333970265292795022" rel="publisher" />

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta property="og:image" content="/assets/images/d_social.png">
<meta property="og:image:type" content="image/png">

<script type='application/ld+json'> 
  {
    "@context": "http://schema.org",
    "@type": "Person",
    "@id": "https://www.dariomac.com/me",
    "image": "https://dariomac.com/assets/aboutme-me.jpg",
    "jobTitle": "Computer Engineering, MSc",
    "name": "Darío Macchi",
    "alumniOf": {
      "@type": "EducationalOrganization",
      "logo": "https://upload.wikimedia.org/wikipedia/en/thumb/b/b2/Universidad_ORT_Uruguay_-_Logo.jpg/220px-Universidad_ORT_Uruguay_-_Logo.jpg",
      "name": "Universidad ORT Uruguay",
      "sameAs": "https://en.wikipedia.org/wiki/Universidad_ORT_Uruguay",
      "url": "https://www.ort.edu.uy/"
    },
    "birthPlace": "Paysandú, Uruguay",
    "birthDate": "1981.08.12",
    "height": "1.72 meters",
    "gender": "male",
    "nationality": "Uruguayan",
    "url": "https://www.dariomac.com",
    "sameAs" : [
      "http://twitter.com/_dariomac",
      "http://uy.linkedin.com/in/dariomac",
      "http://www.researchgate.net/profile/Dario_Macchi/",
      "http://ort-uy.academia.edu/Dar%C3%ADoMacchi",
      "http://www.informatik.uni-trier.de/~ley/pers/hd/m/Macchi:Dario"
    ]
  }
</script>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "@id": "https://www.dariomac.com/software-engineering-advisor-consultant",
    "name": "Darío Macchi",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.dariomac.com/assets/images/d.png"
    },
    "url": "https://www.dariomac.com"
  }
</script>


      <script type="application/ld+json">
        {}
      </script>
  </head>
  <body>
    <div class="board_view details">

      <main class="dm-main-content is-fixed">
        <div class="dm-tab-filter-wrapper">
          <div class="dm-tab-filter">
            <ul class="dm-filters d-block d-md-none">
              <li class="placeholder">
                <a data-type="all" href="#0">All</a> <!-- selected option on mobile -->
              </li>
              <li class="filter"><a class="selected" href="#0">All</a></li>
<li class="filter"><a href="/about-me">About Me</a></li>
<li class="filter"><a href="/kanbancv">What is KanbanCV</a></li>

            </ul> <!-- dm-filters -->
          </div> <!-- dm-tab-filter -->

          <div class="container-fluid float-left"></div>
        </div> <!-- dm-tab-filter-wrapper -->

        <div class="container-fluid dm-board essay">
          <article>
            <div class="row featured">
              <div class="col-md-12">
                <header>
                  <h1>Behind the scenes of Ethereum Pet Shop tutorial</h1>
                  <p class="date">2020-03-30</p>
                </header>

                
                <section class="description">
                  <p>
                    Deep dive into some tools/topics beyond the coverage of Ethereum Pet Shop -- Your First Dapp tutorial. I explain things from a programmer point of view without worrying about underlying technology and concepts like mining hashing, elliptic-curve cryptography, peer-to-peer networks, etcetera. They are not necessary to use blockchain and you will have to accept them as given by the platform.
                  </p>
                </section>

                <section>
                    <p>If you are wondering how you can get started with blockchain and you have made the decision to embrace Ethereum, then you can start with <a href="https://www.trufflesuite.com/tutorials/pet-shop">Ethereum Pet Shop -- Your First Dapp</a> tutorial. It’s a very comprehensive and well-written tutorial that covers everything you need to start playing around with Ethereum. Instead of repeating the concepts, we will work on that same example and dive into some tools/topics beyond the coverage of the tutorial. We will be explaining things from a programmer point of view without worrying about underlying technology and concepts like mining <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function">hashing</a>, <a href="https://en.wikipedia.org/wiki/Elliptic_curve_cryptography">elliptic-curve cryptography</a>, <a href="https://en.wikipedia.org/wiki/Peer-to-peer">peer-to-peer networks</a>, etcetera. They are not necessary to use blockchain and you will have to accept them as given by the platform.</p>
<p>First of all, you need to install Truffle. But what is Truffle? It is a “development environment, testing framework and asset pipeline for Ethereum, aiming to make life as an Ethereum developer easier.” Basically it lets you compile &amp; migrate smart contracts, do automatic testing with Mocha and Chai, rebuilding of assets during development, and much more. It also lets you create boilerplates called Truffle Boxes containing modules, Solidity contracts &amp; libraries, frontend views and more. You can see and “unbox” every public box from <a href="https://www.trufflesuite.com/boxes">here</a>.</p>
<p><picture>
              <source srcset="assets/pet-shop-1.webp" type="image/webp">
  
              <img src="assets/pet-shop-1.jpg#center" alt="Truffle Boxes"></picture></p>
<p>Then the tutorial asks us to create our first smart contract. A contract is a collection of code (its function) and data (its state) written in Solidity, an object-oriented programming language used in various blockchain platforms besides Ethereum.</p>
<p>The first contract is called Adoption. It starts with the line <code>address[16] public adopters;</code> which declares a state variable called <code>adopters</code> of type <code>address[n]</code>, an array of Ethereum addresses. You can think of it as a single slot in a database that you can query and alter by calling functions (<code>adopt</code> and <code>getAdopters</code> in the tutorial example). Each address is a 20 byte (160 bit) value used to identify an account that can also be used to send and receive Ether between accounts.</p>
<p>So, you can see a blockchain as a globally shared transactional database, where everyone can read entries just by being in the network. If you want to change something you can create a transaction and, if it’s accepted by everyone, it will be completely applied; otherwise, it will not be done at all.</p>
<p><picture>
              <source srcset="assets/pet-shop-2.webp" type="image/webp">
  
              <img src="assets/pet-shop-2.jpg#center" alt="Blockchain transaction"></picture></p>
<p>The diagram above shows what happens when an account (identified by its address) wants to adopt a pet using it’s ID. The first transaction is valid (accepted) so Block14 shows its result. You can always see the previous block to ask for its state and see the difference. Then, if for any reason, you want to adopt a dog that does not exist, the <code>require</code> of the <code>adopt</code> function will throw an exception (unless you pass a second parameter to the <code>require</code> to add a custom message). This will force a rollback (due to the nature of the transaction) so Block15 will never be created and the Gas used will be returned (well, maybe not all of it - we’ll explain more about this later).</p>
<p>Now, what happens if two transactions contradict each other in terms of block creation? Since blocks form a linear sequence (blockchain), the transaction that ends in first place will become part of the block. That first one will be selected for you, in a globally accepted order (during the mining) to solve the problem of what is “first” in terms of peer-to-peer network. So, nobody can assure you that your transaction will be included in the next block or any specific block in the future. It's up to the miners to determine in which block a transaction will be included.</p>
<p>Back to the pet shop example, we can see that the adopt function uses the <code>msg.sender</code>. There are special variables and functions like <code>msg</code>, <code>tx</code> and <code>block</code> that always exist in the global namespace and provide information about the blockchain. <a href="https://solidity.readthedocs.io/en/latest/units-and-global-variables.html#block-and-transaction-properties">Here</a> you can find a list of them. But, what if I want (for any reason) to permanently store the address of the person creating the contract? In that case you can use a <a href="https://solidity.readthedocs.io/en/v0.5.11/contracts.html#constructor">constructor</a>, that is a special function that runs during the contract creation and cannot be called afterwards. This is how the pet shop tutorial contract looks if you refactor it to use a <code>constructor</code>.</p>
<script src="https://gist.github.com/dariomac/bb86df06b0036c41f25dc6715a299c4d.js"></script>
<h2><a name="estimating-gas-in-ethereum" class="anchor">
<a name="estimating-gas-in-ethereum" href="#estimating-gas-in-ethereum" class="no_external_ico">Estimating Gas in Ethereum</a></h2>
<p>Something that bothered me from the very beginning was the Gas consumption. Remember that Gas is a unit that measures the amount of computational effort that will take to execute a given operation. Each created contract and every transaction executed will consume a certain amount of gas. So the first question (at least for me) is, how do I know how much Gas is needed to create a contract or to execute a transaction? The answer wasn’t straightforward, at least at the beginning.</p>
<p>If you did the pet shop tutorial, you saw that <a href="https://github.com/ethereum/web3.js/">web3 Javascript library</a> is used to interact with the Ethereum blockchain, retrieving users, sending transactions, interacting with smart contracts and more. Digging in the web3 documentation I found a function called <code>estimateGas</code> but it's in two places: <code>web3.eth</code> and <code>web3.eth.Contract</code>. The <a href="https://web3js.readthedocs.io/en/v1.2.6/web3-eth.html#estimategas">first option</a> receives a transaction object and a callback function, where the transaction object has all the necessary information to do the call simulation and return the estimated Gas. The <a href="https://web3js.readthedocs.io/en/v1.2.6/web3-eth-contract.html#methods-mymethod-estimategas">second</a> (which I found clearer, at least for my level of knowledge) goes against the function of the contract you want to measure. For example, if you want to know how much Gas is consumed by the <code>adopt</code> function call with specific parameters you can do:</p>
<script src="https://gist.github.com/dariomac/afe2984260d5e845bda41b3a1c9bd58b.js"></script>
<p><code>adoptionInstance</code> is an instance of the deployed contract where you can call the adopt function as stated in the tutorial. However, if instead of calling the <code>adoptionInstance.adopt(petId, {from: account});</code> you call the <code>estimateGas</code> with the same params, you will receive the estimated Gas consumption after the transaction simulation.</p>
<h2><a name="gas-cost-in-ether" class="anchor">
<a name="gas-cost-in-ether" href="#gas-cost-in-ether" class="no_external_ico">Gas cost in Ether</a></h2>
<p>Remember that Ether is the currency inside Ethereum. So, what is the cost, in terms of Ether, of the previous Gas consumption calculation? To know it, we must know the Gas price. The Gas price is a value representing how much Ether a user is willing to pay per Gas. On every transaction you can set the max amount of Gas you are willing to consume and the price you are willing to pay for each unit of Gas. I say “can” because those parameters are optional. If you don’t set them, the network will provide some value determined by the last few blocks' median gas price. This price can be obtained asking the network with <code>web3.eth.getGasPrice</code> and it would be returned in Wei (the smallest denomination of Ether, 1 Ether = 1018 wei). Here is the complete example asking for confirmation to spend x amount of Ether in each adoption transaction:</p>
<script src="https://gist.github.com/dariomac/cf748e06bd591cdd0ed4d8a4cd29fed6.js"></script>
<p>There are too many topics to be covered in just one article, such as <a href="https://solidity.readthedocs.io/en/v0.5.11/introduction-to-smart-contracts.html#storage-memory-and-the-stack">Storage, Memory and the Stack</a>, Events triggered from contracts and heard from client side via web3, <a href="https://solidity.readthedocs.io/en/v0.5.11/introduction-to-smart-contracts.html#message-calls">Message Calls</a> to call contract from other contracts, etc. I will try to share more about them next time!</p>

                </section>

                  <section>
                    <h2 id="Acknowledgments">Acknowledgments</h2>
                      <p><a href="https://www.vairix.com/tech-blog/behind-the-scenes-of-ethereum-pet-shop-tutorial">This post</a> was written for Vairix Software Development, so I want say thanks to them for let me share this with you in my homepage.</p>

                  </section>
                  <section>
                    <h2>Significant Revisions</h2>
                    <p><em>Mar 30, 2020</em>: Original Publication on vairix.com</p>
<p><em>Jul 15, 2020</em>: Original Publication on dariomac.com</p>

                  </section>



<section class="related-topics">
  <h2>Related topics</h2>
  <ul>
      <li>
        <a href="/blockchain-101-an-introduction">If you don&#x27;t know the basics of Blockchain, you can start here!</a>
      </li>
  </ul>
</section>


              </div>
            </div>
        </div> <!-- container-fluid dm-board -->

        <a href="/" class="logo">
          <img style="float:left;" width="50" height="50" src="/assets/images/d.png" alt="Orange D inside a circle">
        </a>
        <div class="submenu" style="position: fixed; top: 0; right: 0; z-index: 10;">
  <div class="orange_box">
    <a class="url" href="/about-me">
        <div class="username">
            Darío Macchi
        </div>
    </a>
    <ul>
      <li id="geo">
        <a target="_blank" href="http://maps.google.com/maps?q=montevideo+city+uruguay&amp;hl=en&amp;sll=-32.522779,-55.765835&amp;sspn=5.325828,9.876709&amp;t=v&amp;hnear=Montevideo,+Montevideo+Dept,+Uruguay&amp;z=11" itemprop="url">
            Montevideo
        </a><span>-</span>
        <a href="https://www.google.com.uy/maps/preview?q=google+maps+uruguay&amp;ie=UTF-8&amp;hq=&amp;hnear=0x9575073afb5fde09:0x4a5596616016524a,Uruguay&amp;gl=uy&amp;ei=KiKjU6fpE-HNsQSlqYGoCg&amp;ved=0CBsQ8gEwAA" itemprop="url">
          Uruguay
        </a>
      </li>
    </ul>
    <ul>
      <li id="common_cv"><strong><a href="/kanbancv" style="color:#FFF">What is this?</a></strong></li>
    </ul>
    <ul>
      <li><a href="/contact-me">Contact me</a></strong></li>
    </ul>
  </div>
</div>

      </main> <!-- dm-main-content -->
    </div>
    <!--</div>-->

    <div class="footer" style="text-align:center; width:100%;">
  <div style="text-align:center; width:100%">
  <ul>
    <li style="margin-top: 0px;" class="d-none d-lg-block">
      <a href="javascript:void(0);" onclick="window.open('http://www.copyscape.com/?q=' + escape(window.location) + '&src=front'); return false;">
        <IMG src="/assets/images/cs-wh-3d-234x16.gif" alt="Protected by Copyscape Duplicate Content Detector" title="Protected by Copyscape Plagiarism Checker - Do not copy content from this page." width="234" height="16" border="0">
      </A>
    </li>
    <li><a style="padding-top:1px" href="/kanbancv">KanbanCV</a> © 2011-2020 <a style="padding-top:1px" href="/sitemap"><i class="fa fa-sitemap" aria-hidden="true"></i> Sitemap</a></li>
    <li>
      <a href="http://uy.linkedin.com/in/dariomac" style="text-decoration:none;" target="_blank">
        <img src="/assets/linkedin.png" width="16" height="15" alt="View Darío Macchi's LinkedIn profile" border="0" />
      </a>
    </li>
    <li>
      <a href="http://twitter.com/_dariomac" target="_blank">
        <img src="/assets/twitter.png" width="16" height="16" alt="View my twitter"/>
      </a>
    </li>
    <li class="d-none d-lg-block">
      <a href="http://www.researchgate.net/profile/Dario_Macchi/" target="_blank">
        <img src="/assets/researchgate.png" width="15" height="15" alt="View my ResearchGate profile"/>
      </a>
    </li>
    <li style="margin-top: 0px" class="d-none d-lg-block">
      <a href="http://humanstxt.org/humans/dario-macchi/" target="_black">
        <img src="/assets/images/humanstxt-transparent-color.png" width="84" height="15" />
      </a>
    </li>
  </ul>
  </div>
</div>

<script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      multilanguagePage: true,
      gaTrack: true,
      gaId: 'UA-28220054-1',
      floatPosition: google.translate.TranslateElement.FloatPosition.BOTTOM_LEFT
    });
  }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script type="text/javascript" src="/assets/vendor/jquery/jquery-3.4.1.min.js"></script>



    <script src="/assets/vendor/jquery.fancybox/jquery.fancybox.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script src="/assets/js/main.js"></script> <!-- Resource jQuery -->
    <script>
      $(".fancybox").fancybox({
        arrows: true,
        loop: true,
        keyboard: true
      });
    </script>
  </body>
</html>
