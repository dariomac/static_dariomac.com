<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Node.js logging solutions | Darío Macchi</title>
    <style>
      
      @charset "UTF-8";
html {
  height: 100%;
}

body {
  height: 100%;
  margin: 0px;
  padding: 0px;
  color: #414141;
  font-size: 11px;
}

article a {
  text-decoration: none;
  color: #000;
}

a img {
  border: 0px;
}

.submenu {
  float: right;
  padding-top: 7px;
}

.orange_box {
  padding: 0px 0px 0px 10px;
  font-weight: bold;
  background: #ff922c;
  border: #ff922c 1px solid;
  border-radius: 12px;
  float: left;
  color: #fff;
  margin-right: 10px;
}

.orange_box div.username {
  padding: 0px 10px 0px 34px;
  background: url('data:image/png;base64,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') no-repeat 0px 3px;
  float: left;
  height: 35px;
  line-height: 35px;
}

.orange_box ul {
  border-left: #ec6100 1px solid;
  padding: 0px 10px 0px 5px;
  float: left;
  overflow: hidden;
  list-style-type: none;
  list-style-image: none;
  margin: 0px;
}

.orange_box ul li {
  padding: 10px 0px 8px 0px;
  float: left;
}

.orange_box ul li a {
  border-left: #ff922c 1px solid;
  font-weight: bold;
  padding: 0px 0px 0px 5px;
}

.orange_box ul li a {
  padding: 0px;
}

/* Footer style {*/
.footer {
  background-color: #00445c; height: 20px; color: #ffffff; overflow: hidden;
}
.footer a {
  color: #ffffff
}
.footer a:hover {
  text-decoration: underline
}
.footer ul {
  float: right;
  list-style-type: none;
  margin-top: 2px;
}
.footer li {
  border-left: #ffffff 1px solid; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; float: left; padding-top: 0px; height:16px; margin-top:0px;
}
.footer li:first-child {
  border-bottom: 0px; border-left: 0px; border-top: 0px; border-right: 0px; height:16px; margin-top:1px;
}
.clearfix:after {
  display: block; height: 0pt; visibility: hidden; clear: both; content: "."
}
.footer ul:after {
  display: block; height: 0pt; visibility: hidden; clear: both; content: "."
}

@media only screen and (min-width: 1170px) {
  .details .dm-main-content.is-fixed .dm-board {
    padding-top: 50px;
  }

  .container-fluid.dm-board {
    max-width: 800px;
    border: #d8d7d7 1px solid;
  }
}

.details .dm-main-content.is-fixed .dm-board {
  margin-bottom: 40px;
}

.details .container-fluid.dm-board h1 {
  font-size: 20px;
  font-weight: bold;
  padding: 5px 0px 0px 0px;
  margin: 0px 0px 6px 0px;
}

.details .container-fluid.dm-board h2 {
  font-size: 18px;
  margin-bottom: 6px;
  color: #000;
}

.details .container-fluid.dm-board h3 {
  font-size: 16px;
  margin-bottom: 2px;
  text-decoration: underline;
}

.details .container-fluid.dm-board h4 {
  font-size: 14px;
  font-style: italic;
}

article li {
  margin-bottom: 4px;
}

article, section {
  color: #414141;
  font-size: 14px;
  text-align: justify;
}

header, section {
  margin: 0px 20px;
}

header p {
  text-align: left;
}

header p:not(:last-child) {
  margin-bottom: 0px;
}

.anchor {
  display: block;
  position: relative;
  top: -54px;
}

article a:not(.no_external_ico), section a:not(.no_external_ico) {
  font-weight: bold;
  color: #069;
  background: url(/assets/images/external.png) right 50% no-repeat;
  padding-right: 12px;
}

article a:not([href]) {
  background: inherit;
  padding-right: inherit;
}

article .duration {
  margin-bottom: 0px;
}

section table {
  margin: 0 auto;
  max-width: 636px;
}

.summary {
  font-style: italic;
  padding-top: 8px;
  cursor: none !important;
  margin-bottom: 1rem;
}

table td, table th {
  border: #d8d7d7 1px solid;
  padding: 5px;
}

.essay .date {
  width: 100%;
  border-top: 1px solid;
  text-align: right;
}

.essay p {
  font-size: 14px;
}


      .essay {
        margin-left: inherit;
        border: 0px !important;
      }

      .essay article {
        margin-left: 26px;
      }

      .essay p {
        font-size: 16px;;
      }

      .details .dm-board h1 {
        font-size: 24px;
        font-weight: bold;
        padding: 20px 0px 0px 0px;
        margin: 0px 0px 6px 0px;
      }

      .details .dm-board h2 {
        font-size: 20px;
        margin-bottom: 2px;
        font-weight: bold;
        padding-top: 8px;
      }

      .details .dm-board h3 {
        font-weight: bold;
        text-decoration: inherit;
      }

      article .essay h3 {
        font-weight: bold !important;
        text-decoration: inherit !important;
      }

      article .essay li {
        font-size: 14px;
      }

      .description > p {
        font-size: 19px;
        padding-bottom: 15px;
        font-style: italic;
        color: #414141;
        text-align: left;
      }

    </style>

    <meta name="google-site-verification" content="46a7V_NIglu9MvjEX4267RGvXUGqYaic6LPWM6eQ824" />

    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Darío Macchi" />
<meta name="description" content="This article describes a NodeJS module to generate centralized logs of different sources (most of the time, microservices) adding client requests traceability. It use Winston and Morgan modules under the hood but add a layer of services to provide a common highly-customizable format which includes type of signal (request/response), timestamps, ip address, user agent and most important, short non-sequential url-friendly unique ids that let you “follow” the client activity from the first request done to any service until it leaves." />
<meta name="keywords" content="kanbancv,resume,kanban,curriculum vitae,me,experience,education,research,projects,software engineer,PwC,InnovaAge,Universidad ORT Uruguay" />

<link rel="dns-prefetch" href="//dariomac.com"/>
<link rel="dns-prefetch" href="//translate.googleapis.com"/>
<link rel="dns-prefetch" href="//gstatic.com"/>
<link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com"/>
<link rel="dns-prefetch" href="//google-analytics.com"/>
<link rel="dns-prefetch" href="//fonts.gstatic.com"/>
<link rel="dns-prefetch" href="//translate.google.com"/>
<link rel="dns-prefetch" href="//google.com"/>
<link rel="dns-prefetch" href="//c.statcounter.com"/>
<link rel="dns-prefetch" href="//statcounter.com"/>
<link rel="dns-prefetch" href="//fonts.googleapis.com"/>
<link rel="dns-prefetch" href="//yui.yahooapis.com"/>

<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans' type='text/css'>
<!-- <link rel="stylesheet" href="https://yui.yahooapis.com/pure/0.6.0/pure-min.css" type='text/css'> -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" href="/assets/css/18style.css" type="text/css" >
<link rel="stylesheet" href="/assets/css/18style_desktop.css" media='screen and (min-width: 768px)' type="text/css">

<link rel="canonical" href="https://www.vairix.com/nodejs-logging-solutions" />

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-28220054-1']);
_gaq.push(['_trackPageview']);

(function () {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = (document.location.protocol === 'https:' ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

function afterContentDraw () {
  setTimeout(function () {
    var aList = $('a').not('a[href^="/"]').not('a[href*="www.dariomac.com"]').not('a[href*="javascript:void(0)"]');
    aList = aList.add($('a[href$=".pdf"],a[href$=".zip"],a[href$=".txt"]'));
    $.each(aList,
      function (k, v) {
        var $v = $(v);

        $v.click(function () {
          _gaq.push(['_trackPageview', $v.attr('href')]);
        });
        // $v.css('color','red');
      });
    
    preloadImages($('a.fancybox'));
  }, 1000);
}

function preloadImages (array) {
  if (!preloadImages.list) {
    preloadImages.list = [];
  }
  for (var i = 0; i < array.length; i++) {
    var img = new Image();
    img.src = $(array[i]).attr('href');
    preloadImages.list.push(img);
  }
}

</script>

<!-- Default Statcounter code for Dariomac.com
https://www.dariomac.com -->
<script type="text/javascript">
  var sc_project=9186547; 
  var sc_invisible=1; 
  var sc_security="dce954c9"; 
  </script>
  <script type="text/javascript"
  src="https://www.statcounter.com/counter/counter.js"
  async></script>
  <noscript><div class="statcounter"><a title="Web Analytics"
  href="https://statcounter.com/" target="_blank"><img
  class="statcounter"
  src="https://c.statcounter.com/9186547/0/dce954c9/1/"
  alt="Web Analytics"></a></div></noscript>
<!-- End of Statcounter Code -->

<link rel="shortcut icon" href="/favicon.ico" />

<link href="https://plus.google.com/101333970265292795022" rel="publisher" />

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta property="og:image" content="/assets/images/d_social.png">
<meta property="og:image:type" content="image/png">

<script type='application/ld+json'> 
  {
    "@context": "http://schema.org",
    "@type": "Person",
    "@id": "https://www.dariomac.com/me",
    "image": "https://dariomac.com/assets/aboutme-me.jpg",
    "jobTitle": "Computer Engineering, MSc",
    "name": "Darío Macchi",
    "alumniOf": {
      "@type": "EducationalOrganization",
      "logo": "https://upload.wikimedia.org/wikipedia/en/thumb/b/b2/Universidad_ORT_Uruguay_-_Logo.jpg/220px-Universidad_ORT_Uruguay_-_Logo.jpg",
      "name": "Universidad ORT Uruguay",
      "sameAs": "https://en.wikipedia.org/wiki/Universidad_ORT_Uruguay",
      "url": "https://www.ort.edu.uy/"
    },
    "birthPlace": "Paysandú, Uruguay",
    "birthDate": "1981.08.12",
    "height": "1.72 meters",
    "gender": "male",
    "nationality": "Uruguayan",
    "url": "https://www.dariomac.com",
    "sameAs" : [
      "https://twitter.com/_dariomac",
      "https://uy.linkedin.com/in/dariomac",
      "https://www.researchgate.net/profile/Dario_Macchi",
      "https://ort-uy.academia.edu/Dar%C3%ADoMacchi",
      "https://www.informatik.uni-trier.de/~ley/pers/hd/m/Macchi:Dario"
    ]
  }
</script>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "@id": "https://www.dariomac.com/software-engineering-advisor-consultant",
    "name": "Darío Macchi",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.dariomac.com/assets/images/d.png"
    },
    "url": "https://www.dariomac.com"
  }
</script>


    <script type="application/ld+json">
        {
          "@context": "http://schema.org", 
          "@type": "BlogPosting",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://www.dariomac.com/"
          },
          "headline": "Node.js logging solutions",
          "alternativeHeadline": "Node.js logging solution with client tracing capability",
          "url": "https://www.dariomac.com/",
          "datePublished": "2020-01-29",
          "dateCreated": "2019-12-28",
          "description": "This article describes a NodeJS module to generate centralized logs of different sources (most of the time, microservices) adding client requests traceability. It use Winston and Morgan modules under the hood but add a layer of services to provide a common highly-customizable format which includes type of signal (request/response), timestamps, ip address, user agent and most important, short non-sequential url-friendly unique ids that let you “follow” the client activity from the first request done to any service until it leaves.",
          "author": {
            "@id": "https://www.dariomac.com/me"
          },
          "publisher": {
            "@id": "https://www.dariomac.com/software-engineering-advisor-consultant"
          }
        } 
    </script>
  </head>
  <body>
    <div class="board_view details">

      <main class="dm-main-content is-fixed">
        <div class="dm-tab-filter-wrapper">
          <div class="dm-tab-filter">
            <ul class="dm-filters d-block d-md-none">
              <li class="placeholder">
                <a data-type="all" href="#0">All</a> <!-- selected option on mobile -->
              </li>
              <li class="filter"><a class="selected" href="#0">All</a></li>
<li class="filter"><a href="/">Home</a></li>
<li class="filter"><a href="/about-me">About Me</a></li>
<li class="filter"><a href="/kanbancv">What is KanbanCV</a></li>

            </ul> <!-- dm-filters -->
          </div> <!-- dm-tab-filter -->

          <div class="container-fluid float-left"></div>
        </div> <!-- dm-tab-filter-wrapper -->

        <div class="dm-board essay">
          <article>
            <div class="row featured">
              <div class="col-md-6">
                <header>
                  <h1>Node.js logging solutions</h1>
                  <p class="date">2020-01-29</p>
                </header>

                
                <section class="description">
                  <p>
                    
                  </p>
                </section>

                <section>
                    <h2><a name="do-you-feel-lost-when-something-happens-and-your-logs-dont-show-any-useful-infor" class="anchor">
<a name="do-you-feel-lost-when-something-happens-and-your-logs-dont-show-any-useful-infor" href="#do-you-feel-lost-when-something-happens-and-your-logs-dont-show-any-useful-infor" class="no_external_ico">Do you feel lost when something happens and your logs don’t show any useful information?</a></h2>
<p>Ok, me too. So I decided to do something about it. I started as everyone, using <a href="https://www.npmjs.com/package/morgan">Morgan</a> as an easy way to log requests and responses. Morgan is a middleware that listens to each request made to the server, the request continues down the pipeline and finally logs request and response information in one line. It saves a lot of time because you don’t have to manually create those logs.</p>
<p>But I need more. As I said, it shows request and response information in one line. What if you want to log something after the request was logged and before the response line in the log? E.g.</p>
<p><picture>
              <source srcset="/assets/nodejs-logging1.webp" type="image/webp">
  
              <img src="/assets/nodejs-logging1.jpg#center" alt="Log generic example"></picture></p>
<p>This can’t be done with Morgan. I need something more flexible, something that lets me log whatever I want, whenever I want… without losing the automation gained with Morgan. To achieve this I went over the most popular module for logging, which is <a href="https://www.npmjs.com/package/winston">Winston</a>.</p>
<p>Winston lets you log whatever you want. You just need to create it and call it.</p>
<p><picture>
              <source srcset="/assets/nodejs-logging2.webp" type="image/webp">
  
              <img src="/assets/nodejs-logging2.jpg#center" alt="Winston configuration"></picture></p>
<p>Winston decouples parts of logging and makes it extensible and flexible. It can be configured to multiple levels of logging and has a large and robust feature set. So for us, it was natural to mix both solutions.</p>
<p><picture>
              <source srcset="/assets/nodejs-logging3.webp" type="image/webp">
  
              <img src="/assets/nodejs-logging3.jpg#center" alt="Morgan with Winston"></picture></p>
<p>With this code, I use Morgan to automate the request-response log, but I use Winston as a renderer to keep a consistent format between automatic and manual logging.</p>
<p>So, with a couple more configurations (mostly in Winston formatter) I end with a logger like this:</p>
<p><picture>
              <source srcset="/assets/nodejs-logging4.webp" type="image/webp">
  
              <img src="/assets/nodejs-logging4.jpg#center" alt="Log result"></picture></p>
<p>There I see two request-response cycles, both done from a web browser that returned 304 as status code. Requests are represented with -&gt; while responses are &lt;-. Messages sent between request and response are marked as --.</p>
<h2><a name="has-it-happened-to-you-that-a-user-reports-some-issues-and-you-dont-have-a-way-t" class="anchor">
<a name="has-it-happened-to-you-that-a-user-reports-some-issues-and-you-dont-have-a-way-t" href="#has-it-happened-to-you-that-a-user-reports-some-issues-and-you-dont-have-a-way-t" class="no_external_ico">Has it happened to you that a user reports some issues and you don’t have a way to follow its trail in the logs?</a></h2>
<p>If this hasn’t happened to you, you are a lucky guy. I need a way to trace down some user from its first request to the last response. Also, I need to trace the internal calls (e.g. calls to microservices or endpoints). Remember that in production, with say 50 requests/sec, your logs sorted by time would be mixed between several requests from different users. How can I achieve this? I implement a middleware that adds an ID to the first request, or if the request came with an ID as header variable, use it instead.</p>
<p><picture>
              <source srcset="/assets/nodejs-logging5.webp" type="image/webp">
  
              <img src="/assets/nodejs-logging5.jpg#center" alt="Unique requirement id generation"></picture></p>
<p>Using <a href="https://www.npmjs.com/package/express-http-context">express-http-context</a> I make the ID available to be used anywhere. Also, because I add it to the response header, you can follow the trace even to the client-side for further use (e.g. if you experiment issues in the client-side, you can take note of that ID and later search for it in the logs server-side). The ID is the one between square brackets in the previous output sample.</p>
<h2><a name="have-you-ever-wanted-to-change-the-verbosity-of-your-logs-in-realtime-without-re" class="anchor">
<a name="have-you-ever-wanted-to-change-the-verbosity-of-your-logs-in-realtime-without-re" href="#have-you-ever-wanted-to-change-the-verbosity-of-your-logs-in-realtime-without-re" class="no_external_ico">Have you ever wanted to change the verbosity of your logs in realtime, without restarting your server, just to catch a slippery bug?</a></h2>
<p>Finally, I need to change the verbosity level of the log in realtime, without restarting the server. The reason behind this is that e.g. when I’m debugging, I want to see the queries executed against the database. Sometimes I want to log a complete JSON object, or just generate more information on some level, other than debugging, to be consumed in special opportunities. For these reasons, we choose to log using <a href="https://en.wikipedia.org/wiki/Syslog#Severity_level">syslog severity levels</a>.</p>
<p><picture>
              <source srcset="/assets/nodejs-logging6.webp" type="image/webp">
  
              <img src="/assets/nodejs-logging6.jpg#center" alt="Full example of how to use severity levels"></picture></p>
<p>In this example, the logger is my solution to logging and I am calling it in the catch, twice… but with different severity levels. Functions called emerg, alert, crit, error, warning, notice, info and debug are available from Winston. As the doc says “Logging levels in Winston conform to the severity ordering specified by RFC5424: severity of all levels is assumed to be numerically ascending from most important to least important.” So you can define a level to initiate which specifies the maximum level of messages that it should log and then change it.</p>
<p>To change it, I added an endpoint (fully configurable via options) that lets you make requests to it setting the desired level. As soon as the endpoint receives this parameter, it will change the logging level until you send another request asking to change it again.</p>
<p>e.g. curl localhost:5000/?set_log_level=debug will set the default log level to debug, so basically it will log everything!</p>
<h2><a name="conclusion" class="anchor">
<a name="conclusion" href="#conclusion" class="no_external_ico">Conclusion</a></h2>
<p>With all these ideas, and to have all the same logging solutions, with the same format, on every project, we built a module and made it <a href="https://github.com/dariomac/dm-logger">publicly available in GitHub</a>, so you can use it too.</p>

                </section>

                  <section>
                    <h2 id="Acknowledgments">Acknowledgments</h2>
                      <p><a href="https://www.vairix.com/nodejs-logging-solutions">This post</a> was written for Vairix Software Development, so I want say thanks to them for let me share this with you in my homepage.</p>

                  </section>
                  <section>
                    <h2>Significant Revisions</h2>
                    <p><em>Dec 27, 2019</em>: Original Publication on vairix.com</p>
<p><em>Jan 29, 2020</em>: Original Publication on dariomac.com</p>

                  </section>



<section class="related-topics">
  <h2>Related topics</h2>
  <ul>
      <li>
        <a href="https://dariomac.com/traceability-logger">This is the card of the original Traceability Logger project</a>
      </li>
  </ul>
</section>


  <section class="backlinks">
    <h2>Mentioned in</h2>
        <ul>
            <li>
              <a href="/vairix-software-engineer">Sr. Software Engineer</a>
            </li>
            <li>
              <a href="/traceability-logger">Traceability Logger</a>
            </li>
        </ul>
  </section>

              </div>
            </div>
        </div> <!-- container-fluid dm-board -->

        <a href="/" class="logo">
          <img style="float:left;" width="50" height="50" src="/assets/images/d.png" alt="Orange D inside a circle">
        </a>
        <div class="submenu" style="position: fixed; top: 0; right: 0; z-index: 10;">
  <div class="orange_box">
    <a class="url" href="/about-me">
        <div class="username">
            Darío Macchi
        </div>
    </a>
    <ul>
      <li id="geo">
        <a target="_blank" href="https://www.google.com/maps/place/Montevideo,+Montevideo+Department/@-34.8207772,-56.5166263,10z/data=!3m1!4b1!4m5!3m4!1s0x959f80ffc63bf7d3:0x6b321b2e355bec99!8m2!3d-34.9011127!4d-56.1645314?hl=en" itemprop="url">
            Montevideo
        </a><span>-</span>
        <a href="https://www.google.com.uy/maps/preview?q=google+maps+uruguay&amp;ie=UTF-8&amp;hq=&amp;hnear=0x9575073afb5fde09:0x4a5596616016524a,Uruguay&amp;gl=uy&amp;ei=KiKjU6fpE-HNsQSlqYGoCg&amp;ved=0CBsQ8gEwAA" itemprop="url">
          Uruguay
        </a>
      </li>
    </ul>
    <ul>
      <li id="common_cv"><strong><a href="/kanbancv" style="color:#FFF">What is this?</a></strong></li>
    </ul>
    <ul>
      <li><a href="/contact-me">Contact me</a></strong></li>
    </ul>
  </div>
</div>

      </main> <!-- dm-main-content -->
    </div>
    <!--</div>-->

    <div class="footer" style="text-align:center; width:100%;">
  <div style="text-align:center; width:100%">
  <ul>
    <li style="margin-top: 0px;" class="d-none d-lg-block">
      <a href="javascript:void(0);" onclick="window.open('https://www.copyscape.com/?q=' + escape(window.location) + '&src=front'); return false;">
        <IMG src="/assets/images/cs-wh-3d-234x16.gif" alt="Protected by Copyscape Duplicate Content Detector" title="Protected by Copyscape Plagiarism Checker - Do not copy content from this page." width="234" height="16" border="0">
      </A>
    </li>
    <li><a style="padding-top:1px" href="/kanbancv">KanbanCV</a> © 2011-2021 <a style="padding-top:1px" href="/sitemap"><i class="fa fa-sitemap" aria-hidden="true"></i> Sitemap</a></li>
    <li>
      <a href="https://uy.linkedin.com/in/dariomac" style="text-decoration:none;" target="_blank">
        <img src="/assets/linkedin.png" width="16" height="15" alt="View Darío Macchi's LinkedIn profile" border="0" />
      </a>
    </li>
    <li>
      <a href="https://twitter.com/_dariomac" target="_blank">
        <img src="/assets/twitter.png" width="16" height="16" alt="View my twitter"/>
      </a>
    </li>
    <li class="d-none d-lg-block">
      <a href="https://www.researchgate.net/profile/Dario_Macchi" target="_blank">
        <img src="/assets/researchgate.png" width="15" height="15" alt="View my ResearchGate profile"/>
      </a>
    </li>
    <li style="margin-top: 0px" class="d-none d-lg-block">
      <a href="http://humanstxt.org" target="_black">
        <img src="/assets/images/humanstxt-transparent-color.png" width="84" height="15" alt="View humans.txt file"/>
      </a>
    </li>
  </ul>
  </div>
</div>

<script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      multilanguagePage: true,
      gaTrack: true,
      gaId: 'UA-28220054-1',
      floatPosition: google.translate.TranslateElement.FloatPosition.BOTTOM_LEFT
    });
  }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script type="text/javascript" src="/assets/vendor/jquery/jquery-3.4.1.min.js"></script>



    <script src="/assets/vendor/jquery.fancybox/jquery.fancybox.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script src="/assets/js/main.js"></script> <!-- Resource jQuery -->
    <script>
      $(".fancybox").fancybox({
        arrows: true,
        loop: true,
        keyboard: true
      });
    </script>
  </body>
</html>
